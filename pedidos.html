<!DOCTYPE html>
<html>
<head>
<style>
* {
  box-sizing: border-box;
}

.myInput {
  background-image: url('/css/searchicon.png');
  background-position: 10px 10px;
  background-repeat: no-repeat;
  width: 100%;
  font-size: 16px;
  padding: 12px 20px 12px 40px;
  border: 1px solid #ddd;
  margin-bottom: 12px;
}

#myTable {
  border-collapse: collapse;
  width: 100%;
  border: 1px solid #ddd;
  font-size: 18px;
}

#myTable th, #myTable td {
  text-align: left;
  padding: 12px;
}

#myTable tr {
  border-bottom: 1px solid #ddd;
}

#myTable tr.header, #myTable tr:hover {
  background-color: #f1f1f1;
}
</style>
</head>
<body>

<h2>Distribuidores</h2>

<input type="text" class="myInput"id="nameInput" onkeyup="filter()" placeholder="Busca por productos.." title="Type in a name">
<input type="text" class="myInput"id="countryInput" onkeyup="filter()" placeholder="Busca por distribuidores.." title="Type in a country">


<table id="myTable">
  <tr class="header">
    <th style="width:60%;">Name</th>
    <th style="width:40%;">Country</th>
  </tr>
  <tr>
    <td>Alfreds Futterkiste</td>
    <td>Germany</td>
  </tr>
  <tr>
    <td>Berglunds snabbkop</td>
    <td>Sweden</td>
  </tr>
  <tr>
    <td>Island Trading</td>
    <td>UK</td>
  </tr>
  <tr>
    <td>Koniglich Essen</td>
    <td>Germany</td>
  </tr>
  <tr>
    <td>Laughing Bacchus Winecellars</td>
    <td>Canada</td>
  </tr>
  <tr>
    <td>Magazzini Alimentari Riuniti</td>
    <td>Italy</td>
  </tr>
  <tr>
    <td>North/South</td>
    <td>UK</td>
  </tr>
  <tr>
    <td>Paris specialites</td>
    <td>France</td>
  </tr>
</table>

<script>

  var nameInput, countryInput, table, trs, tds, i;

  var data;
  var result;

  function getData(){

    table = document.querySelector("#myTable");
    trs = table.querySelectorAll("tr");

    data = { rows: [] };

    for(i = 1; i < trs.length; i++) {

    	tds = trs[i].querySelectorAll("td");

		data.rows.push({
        	el: trs[i],
            name: tds[0].innerHTML.trim(),
            country: tds[1].innerHTML.trim(),
        });
    }

  }

  function filter() {

    nameInput = document.querySelector("#nameInput");
    countryInput = document.querySelector("#countryInput");

    var containsName;
    var containsCountry;

    result = { matches: [] }

    for(i = 0; i < data.rows.length; i++) {

		containsName = data.rows[i]
        .name.toLowerCase().includes(nameInput.value.toLowerCase());
        containsCountry = data.rows[i]
        .country.toLowerCase().includes(countryInput.value.toLowerCase());

      if(containsName && containsCountry) {

        data.rows[i].el.style.display = "";

        // Store result for ajax request
        result.matches.push( {
        	name: data.rows[i].name,
            country: data.rows[i].country,
        });

      }else {
      	data.rows[i].el.style.display = "none";
      }

    }

  	// Print result for debug purposes
    console.dir(result);

  }

  // Initialize data
  getData();


</script>

</body>
</html>
